# 背景 #
### [原文链接](https://launchschool.com/books/http/read/background) ###
## 简要概述和历史回顾 ##
在浏览器的地址栏输入URL，对应的网站就会展示在浏览器中，这是显而易见的事。而当你用鼠标点击了一个链接或者提交了一个表单，浏览器会为你跳转到下一个页面或者提示你提交的内容有误需要重新提交。不难看出，浏览器就是一个连接和交互网络的接口。

其实在你的浏览器的背后，有一堆文件的集合，其中包括CSS、HTML、Javascript、videos、images等。正是这些文件构成了你在浏览器上面看到的页面。这些文件通过HTTP协议从服务器传到你的浏览器，也就是客户端。（所以，现在你大概能够理解为什么所有的URL都是以“http://”开头）

在上世纪80年代，一个叫蒂姆.伯纳斯.李的人发明了HTTP，也就是超文本传输协议。HTTP是一套规则系统，一个协议，可以连接不同的应用程序使其相互之间能够传输超文本文件。换句话说，HTTP是一种机器之间相互沟通的规范，或者消息传输的格式。HTTP遵循一种简单的模型：客户端对服务器发出请求，然后等待响应。因此，它通常被当作是一种“请求/响应的协议”。所谓的“请求”，“响应”，你可以当作是一段文本消息，或者一段字符串，并且它们遵循机器能够理解的格式。

HTTP协议自发明以来经过了几次修改。这个协议刚创建的时候仅仅能够传输HTML文件。1991年，第一个版本HTTP/0.9发布。到了1992年，第二个版本HTTP/1.0发布。HTTP协议开始支持其他类型的文件传输，包括CSS文件、视频、脚本文件和图片。而到了1995年，HTTP的第三个版本HTTP/1.1又引入了包括支持连接复用等一系列特性。1999年，HTTP/1.1版本又有了比较大的改进，这就是我们现在使用的版本。而在本书写作的期间内，HTTP/2.0已经处于前期的开发当中了。
## 互联网如何工作 ##
互联网连接了数以百万计的网络，所有这些网络中的计算机和其他设备之间都能互相通信。按照管理，所有连接到网络中的设备都会有一个独一无二的标志。通常我们使用网络协议地址也就是IP地址作为这一个标志，就好像计算机在互联网中的电话号码一样。此外，IP地址还带有一个端口地址，这提供了更多更详细的关于计算机通信的信息（就好像公司中的分机号码一样）。IP地址通常以下面的形式出现：

``192.168.0.1``

加上了端口号之后是这样：

``192.168.0.1:1234``

IP地址为192.168.0.1，端口号为1234。IP地址是服务器或网络设备的标识符，每个IP地址可以包含成千上万的端口，每一个端口都被用于不同的通信需求。

随着互联网越来越大，网络中每个的设备都需要一个由ISP（网络服务提供商）提供的公网IP地址，并且通过这个IP地址才能实现通信。但是当我们访问谷歌的主页时，我们输入的并不是IP地址，而是它的网址，所以像 http://www.google.com 这些又是什么东西？你的电脑又是怎么知道这些网站的IP地址的？
### DNS ###
URL连接到IP地址之间的映射工作由域名管理系统也就是DNS完成。DNS是一个分布式的数据库，可以把像 http://www.google.com 这样的域名翻译成IP地址，并将请求映射到远程的服务器。换句话说，DNS会记录URL和对应的IP地址。所以，像 http://www.google.com 这样的域名会被解析为IP地址 197.251.230.45 。这意味着，在浏览器的地址栏输入IP地址也可以访问谷歌或其他网址的首页。

然而，相对于一连串的数字，像 http://www.google.com 这样的地址显然更容易记住。DNS的数据库存储在名为DNS服务器的设备上。同时，需要特别注意的一点是，DNS服务器是一个非常庞大的、全球性的、分层次组织的服务器集群，因为从来没有一个单一的服务器能够存储所有的DNS数据。如果一个DNS服务器上找不到请求的域名，它会将请求转发给上一级的DNS服务器。最终，这个域名会在某个DNS服务器上被找到，之后，这个域名对应的IP地址的服务器将会接收这一请求。

下面是你通过浏览器访问互联网的典型的方式：

1. 在浏览器的地址栏输入 http://www.google.com 这样的网址
2. 请求被发送至你的设备网关
3. 这个请求从搜索 http://www.google.com 的IP地址开始，开始在网络中传输。在计算机的屏幕背后， http://www.google.com 只是一个方便记忆的名字，代表了某个IP地址或者某台远程服务器
4. 远程的服务器接受了来自客户端的请求，通过网络返回一个响应给你的网关，由网关交给客户端浏览器
5. 最终，由浏览器将响应以网页的形式展示给用户

当你的浏览器发出请求的时候，其实仅仅只是发送了一些简单的文本给远程IP地址，理解这一点十分重要。因为客服端(浏览器)和服务端(请求的接收方)遵循某种基于HTTP协议的约定，服务器能够拆分解析请求，理解请求的内容并返回响应给Web浏览器。Web浏览器会将响应的字符串处理成你能够理解的内容。浏览像Facebook，Twitter，Google这样的网站时，意味着你一直都在使用HTTP协议。这些细节内容都被隐藏起来了，因为你的浏览器能够自动发送请求和处理响应。互联网的不同部分像是这样的：

<img src="https://d186loudes4jlv.cloudfront.net/http/images/internet.png" width="100%" />
## 客户端与服务端 ##
平时上网最常见的客户端工具就是Web浏览器。常见的浏览器有IE、火狐、Safari、Chrome以及它们的手机移动版。Web浏览器负责发送HTTP请求，接收HTTP响应并将其处理成易于人类理解的形式显示在显示器上。但是Web浏览器不是唯一的客户端工具，还有很多其他的工具和应用程序都能够发送HTTP请求。

你在互联网上请求的内容存储在一台叫做服务器的远程计算机上面。所谓的服务器其实也就是处理用户请求的机器或设备而已。只是这些机器的性能较好，有能力处理高并发的请求，它们的工作就是给用户返回响应。

<img src="https://d186loudes4jlv.cloudfront.net/http/images/http_client_server.png" width="100%" />
## 资源 ##
资源是一个通用术语，代表着互联网上你通过URL与之交互的东西。包括图像，视频，网页，和其他文件。资源并不仅仅局限于文件和网页。资源也可以是一个供你交易股票或者玩游戏的软件。互联网上资源的数量几乎没有限制，难以计量。

<img src="https://d186loudes4jlv.cloudfront.net/http/images/resources.png" width="100%" />
## 无状态的 ##
如果一个协议被设计为每一个请求/响应对都是与前一个完全独立的话，我们就可以说这是一种无状态的协议。对于学习HTTP协议，有必要知道HTTP协议的无状态会影响服务器上的资源的易用性。HTTP协议下，服务器不需要各次请求之间保持连接的信息和状态。这样的话，当请求断开的时候，服务器不需要做任何的清理工作。基于上面两个原因，HTTP是一个非常灵活的协议，但同时也很难构建有状态烦人应用。因为HTTP是一个无状态的协议，这意味着Web开发人员在开发有状态的应用时需要花费很多的精力去模实现一种有状态的体验。

举个例子，你浏览了facebook的网站并且登录了你的facebook账号之后，你会看到的是facebook内部的网页。这是一次完整的请求/响应周期。随后你点击了一张图片，这又是另一个请求/响应周期，并且在此之后你并没有退出登录。如果说HTTP协议是无状态的，那么应用是如何保持状态并记录你的登录信息的呢？事实上，如果说HTTP协议是无状态的，那么facebook是怎么知道哪次请求是来自于你？又如何区分你和其他用户的数据？其实这些都是Web开发人员和Web框架的一些小技巧，可以让Web应用可以看起来是有状态的，但是这些不在本书的讨论范围内。关键你要记住的是，即使你感觉Web应用是有状态的，在它背后，Web仍然是建立在HTTP这种无状态的协议之上的。所以，这就是为什么Web应用虽然灵活但是难以控制，为什么Web应用的安全难以保证，为什么搭建Web这么困难。
## 总结 ##
本章简单解释了互联网的基本工作原理，同时解释了几个关键的术语。你也了解到无状态协议对Web应用的影响。在下一个章节我们将进一步探讨 http://www.google.com 这种地址究竟代表着什么以及由什么组成。